<div class="app">
    <h1>Cadastro de Usuário</h1>
    <mat-card class="card">
        <mat-card-content>
            <form [formGroup]="form" (ngSubmit)="onSubmit()">
                <mat-form-field>
                    <mat-label>Nome</mat-label>
                    <input matInput formControlName="name" (change)="onNameChange($event)">
                    <div *ngIf="form.get('name')?.errors?.['spaces']">
                        <mat-error>O nome não pode conter espaços</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Email</mat-label>
                    <input type="email" matInput formControlName="email" (change)="onEmailChange($event)">
                    <div *ngIf="!form.get('email')?.valid && form.get('email')?.touched">
                        <mat-error>Digite um email válido</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Senha</mat-label>
                    <input type="password" matInput formControlName="password" (change)="onPasswordChange($event)">
                    <div *ngIf="form.get('password')?.errors?.['passwordStrength'] && form.get('password')?.touched">
                        <mat-error>A senha deve ter pelo menos uma letra maiúscula e um caractere especial</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Nome Completo</mat-label>
                    <input type="text" matInput formControlName="completeName" (change)="onCompleteNameChange($event)">
                    <div *ngIf="form.get('completeName')?.errors?.['notCompleteName'] && form.get('completeName')?.touched">
                        <mat-error>O nome completo deve ter um nome e um sobrenome</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Número de telefone</mat-label>
                    <input type="text" matInput formControlName="phoneNumber" (change)="onPhoneNumberChange($event)">
                    <div *ngIf="form.get('phoneNumber')?.errors?.['invalidPhoneNumber'] && form.get('phoneNumber')?.touched">
                        <mat-error>O número de telefone deve estar no padrão (XX) XXXX-XXXX ou (XX) 9XXXX-XXXX</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Endereço</mat-label>
                    <input type="text" matInput formControlName="address" (change)="onAddressesChange($event)">
                    <div *ngIf="form.get('address')?.invalid && form.get('address')?.touched">
                        <mat-error>O endereço é obrigatório</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Data de nascimento</mat-label>
                    <input type="date" matInput formControlName="birthDate" (change)="onBirthDateChange($event)">
                    <div *ngIf="form.get('birthDate')?.errors?.['invalidDate'] && form.get('birthDate')?.touched">
                        <mat-error>A data deve estar no formato dd/MM/yyyy</mat-error>
                    </div>
                    <div *ngIf="form.get('birthDate')?.errors?.['minor'] && form.get('birthDate')?.touched">
                        <mat-error>O usuário deve ser maior de idade</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Gênero</mat-label>
                    <mat-select formControlName="gender" (selectionChange)="onGenderChange($event)">
                        <mat-option value="masculino">Masculino</mat-option>
                        <mat-option value="feminino">Feminino</mat-option>
                    </mat-select>
                    <div *ngIf="form.get('gender')?.invalid && form.get('gender')?.touched">
                        <mat-error>O gênero é obrigatório</mat-error>
                    </div>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Profissão</mat-label>
                    <mat-select formControlName="profession" (selectionChange)="onProfessionChange($event)">
                        <mat-option value="programador">Programador</mat-option>
                        <mat-option value="engenheiro de software">Engenheiro de Software</mat-option>
                        <mat-option value="analista de dados">Analista de Dados</mat-option>
                        <mat-option value="QA">QA</mat-option>
                    </mat-select>
                    <div *ngIf="form.get('profession')?.invalid && form.get('profession')?.touched">
                        <mat-error>A profissão é obrigatória</mat-error>
                    </div>
                </mat-form-field>
                <div class="button">
                    <button type="submit" mat-flat-button color="primary">Cadastrar</button>
                </div>
            </form>
        </mat-card-content>
    </mat-card>
    <mat-list *ngIf="usuario" style="width: 700px;">
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.name }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.email }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.password }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.completeName }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.phoneNumber }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.address }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.birthDate }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.gender }}</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item>{{ usuario.profession }}</mat-list-item>
        <mat-divider></mat-divider>
    </mat-list>
</div>
